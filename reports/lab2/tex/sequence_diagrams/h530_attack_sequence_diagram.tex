\begin{tikzpicture}[scale=1.2]
	\begin{umlseqdiag}
		\tikzumlset{font=\footnotesize}
		\umlobject[no ddots, fill=white]{A} 
		\umlobject[no ddots, fill=white]{i}
		\umlobject[no ddots, fill=white]{B} 
		\umlobject[no ddots, fill=white]{s} 
		\begin{umlcall}[op={$M_1$}]{A}{i} 
			\begin{umlcall}[op={$M_{1}^{'}=A,B,g,Z$},return={$M_2'(g^{Y_1})$}]{i}{B}
			\end{umlcall}
			\begin{umlcall}[op={$M_{1}$},return={$M_2(g^{Y_2})$}]{i}{B}
			\end{umlcall}
			\begin{umlcall}[op={$M_{2}$},return={$M_3=MAC_{sk(A,s)},B,A,MAC_{sk(B,s)}$}]{i}{s}
			\end{umlcall}
			\begin{umlcall}[op={$M_{3}$},return={$M_4$}]{i}{B}
			\end{umlcall}
		\end{umlcall}
		\begin{umlcall}[op={$\{|M|\}_{g^{Y_1}}$}]{i}{B}
		\end{umlcall}
	\end{umlseqdiag}
\end{tikzpicture}